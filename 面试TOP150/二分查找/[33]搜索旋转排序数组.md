> Problem: [33. æœç´¢æ—‹è½¬æ’åºæ•°ç»„](https://leetcode.cn/problems/search-in-rotated-sorted-array/description/)

ğŸ·[æˆ‘çš„leetcodeä¸»é¡µ](https://leetcode.cn/u/qui22ical-gagariny8t/)

[TOC]

# é¢˜ç›®
æ•´æ•°æ•°ç»„ nums æŒ‰å‡åºæ’åˆ—ï¼Œæ•°ç»„ä¸­çš„å€¼ äº’ä¸ç›¸åŒ ã€‚

åœ¨ä¼ é€’ç»™å‡½æ•°ä¹‹å‰ï¼Œnums åœ¨é¢„å…ˆæœªçŸ¥çš„æŸä¸ªä¸‹æ ‡ kï¼ˆ0 <= k < nums.lengthï¼‰ä¸Šè¿›è¡Œäº† æ—‹è½¬ï¼Œä½¿æ•°ç»„å˜ä¸º [nums[k], nums[k+1], ..., nums[n-1], nums[0], nums[1], ..., nums[k-1]]ï¼ˆä¸‹æ ‡ ä» 0 å¼€å§‹ è®¡æ•°ï¼‰ã€‚ä¾‹å¦‚ï¼Œ [0,1,2,4,5,6,7] åœ¨ä¸‹æ ‡ 3 å¤„ç»æ—‹è½¬åå¯èƒ½å˜ä¸º [4,5,6,7,0,1,2] ã€‚

ç»™ä½  æ—‹è½¬å çš„æ•°ç»„ nums å’Œä¸€ä¸ªæ•´æ•° target ï¼Œå¦‚æœ nums ä¸­å­˜åœ¨è¿™ä¸ªç›®æ ‡å€¼ target ï¼Œåˆ™è¿”å›å®ƒçš„ä¸‹æ ‡ï¼Œå¦åˆ™è¿”å› -1 ã€‚

ä½ å¿…é¡»è®¾è®¡ä¸€ä¸ªæ—¶é—´å¤æ‚åº¦ä¸º O(log n) çš„ç®—æ³•è§£å†³æ­¤é—®é¢˜ã€‚

 

ç¤ºä¾‹ 1ï¼š

è¾“å…¥ï¼šnums = [4,5,6,7,0,1,2], target = 0
è¾“å‡ºï¼š4
ç¤ºä¾‹ 2ï¼š

è¾“å…¥ï¼šnums = [4,5,6,7,0,1,2], target = 3
è¾“å‡ºï¼š-1
ç¤ºä¾‹ 3ï¼š

è¾“å…¥ï¼šnums = [1], target = 0
è¾“å‡ºï¼š-1
 

æç¤ºï¼š

1 <= nums.length <= 5000
-104 <= nums[i] <= 104
nums ä¸­çš„æ¯ä¸ªå€¼éƒ½ ç‹¬ä¸€æ— äºŒ
é¢˜ç›®æ•°æ®ä¿è¯ nums åœ¨é¢„å…ˆæœªçŸ¥çš„æŸä¸ªä¸‹æ ‡ä¸Šè¿›è¡Œäº†æ—‹è½¬
-104 <= target <= 104
# åˆ†ç±»
äºŒåˆ†æŸ¥æ‰¾
# æ€è·¯
1. å› ä¸ºæ—‹è½¬å‰æ•°ç»„æ˜¯ä¸€ä¸ªå‡åºçš„æ•°ç»„ï¼Œæ»¡è¶³æˆ‘ä»¬ä¹‹å‰çš„äºŒåˆ†æŸ¥æ‰¾çš„è¦æ±‚ã€‚æ‰€ä»¥åœ¨æ—‹è½¬ä½ç½®çš„å‰åä¸¤ä¸ªåŒºé—´åˆ†åˆ«æ˜¯ä¸¤ä¸ªå‡åºæ•°ç»„ï¼Œåˆ†åˆ«ä½¿ç”¨äºŒåˆ†æ³•ï¼Œå³å¯æ‰¾å‡ºtargetã€‚

   ä½†æ˜¯é¢˜ç›®å¹¶æ²¡æœ‰ç»™å‡ºæ—‹è½¬ä½ç½®ï¼Œè€Œç»™å‡ºçš„æ˜¯æ—‹è½¬åçš„æ•°ç»„ï¼Œæ‰€ä»¥ç¬¬ä¸€æŸ¥æ‰¾å…ˆæ‰¾åˆ°æ—‹è½¬ä½ç½®ï¼ˆå³æœ€å°çš„å…ƒç´ ï¼‰

2. å¦ä¸€ç§æ€è·¯æ˜¯å…ˆæ’åºåå†äºŒåˆ†ï¼Œä½†æ˜¯è¿™æ ·çš„è¯å°±ä¸æ»¡è¶³O(log n)çš„æ—¶é—´å¤æ‚åº¦ï¼Œä¹Ÿä¸è¡Œã€‚

# æ—¶é—´å¤æ‚åº¦
å› ä¸ºæ ¹æ®æ—‹è½¬ä½ç½®åˆ†å¼€ï¼Œä¸€éƒ¨åˆ†æ—¶é—´å¤æ‚åº¦ä¸ºO(log n/2),å¦ä¸€éƒ¨åˆ†ä¹Ÿæ˜¯O(log n/2)ã€‚æ‰€ä»¥æ•´ä½“çš„æ—¶é—´å¤æ‚åº¦è¿˜æ˜¯O(log n)ï¼Œæ»¡è¶³é¢˜ç›®è¦æ±‚ã€‚

# è§£é¢˜æ–¹æ³•

## ä¸ªäººè§£æ³•
### Code
```python
class Solution(object):
    def search(self, nums, target):
        """
        :type nums: List[int]
        :type target: int
        :rtype: int
        """
        # æ‰¾æ—‹è½¬ç‚¹
        def find_min(nums):
            left = 0
            right = len(nums) - 2
            while left <= right:
                mid = left + (right - left) // 2
                if nums[mid] < nums[-1]:  # midæ˜¯åœ¨æ—‹è½¬ç‚¹å³ä¾§çš„åŒºé—´ï¼Œmidå³ä¾§ä¸€å®šæ˜¯æœ‰åºçš„ï¼ŒæŸ“è‰²è“è‰²ï¼Œrightå·¦ç§»
                    right = mid - 1
                else:  # å¦åˆ™ï¼Œmidæ˜¯åœ¨æ—‹è½¬ç‚¹å·¦ä¾§çš„åŒºé—´ï¼Œmidå·¦ä¾§ä¸€å®šæ˜¯æœ‰åºçš„ï¼ŒæŸ“è‰²è“è‰²ï¼Œleftå³ç§»
                    left = mid + 1
            return left  # æœ€ç»ˆleftå’Œrighté‡åˆçš„ä½ç½®å…¶å®å°±æ˜¯æœ€å°å€¼çš„ä½ç½®ï¼Œå› ä¸ºè¿˜æ»¡è¶³whileï¼Œæ­¤æ—¶nums[mid] < nums[-1]ï¼Œright = mid - 1 ï¼Œæ‰€ä»¥æœ€ç»ˆæœ€å°å€¼çš„ä½ç½®æ˜¯leftæˆ–è€…right +1

        # åœ¨æœ‰åºæ•°ç»„æŸ¥æ‰¾target
        def left_bound(nums, target):

            left = 0
            right = len(nums) - 1
            while left <= right:
                mid = left + (right - left) // 2
                if nums[mid] == target:
                    return mid
                elif nums[mid] < target:  # targetä¸€å®šåœ¨midå³ä¾§ï¼Œleftå³ç§»
                    left = mid + 1
                else:
                    right = mid - 1
            return -1
        k = find_min(nums)
        left_search = nums[:k]
        right_search = nums[k:]
        ans = left_bound(left_search, target)
        if ans == -1:
            ans = left_bound(right_search, target)
            if ans == -1:
                return ans
            else:
                return ans + k  # å› ä¸ºå¦‚æœæ˜¯å³åŒºé—´æ±‚å‡ºçš„ç´¢å¼•ï¼Œæ¢ç®—åˆ°åŸæ¥çš„æ•´ä¸ªæ•°ç»„ï¼Œé‚£ä¹ˆéœ€è¦åŠ ä¸Šk
        else:
            return ans
```
